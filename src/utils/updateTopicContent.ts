import { supabase } from '@/integrations/supabase/client';

const topicId = 'ca30a2b8-2c62-43f6-8b75-fa8cecb76c52';

const exercises = {
  exercises: [
    {
      id: 'ex-1',
      title: 'Ալգորիթմի բառային նկարագրություն',
      description: 'Գրեք ալգորիթմ բառային ձևով երկու թվերի գումարը հաշվելու համար։ Նկարագրեք յուրաքանչյուր քայլ հստակ և հաջորդական։',
      type: 'text',
      difficulty: 'easy',
      hint: 'Սկսեք մուտքային տվյալների ընդունումից, ապա գումարեք և արտածեք արդյունքը'
    },
    {
      id: 'ex-2',
      title: 'Բլոկ-սխեմայի կազմում',
      description: 'Նկարեք բլոկ-սխեմա, որը որոշում է՝ արդյոք տրված թիվը զույգ է, թե՞ կենտ։ Օգտագործեք ճիշտ բլոկները՝ սկիզբ, ավարտ, մուտք, ելք, պայման։',
      type: 'diagram',
      difficulty: 'easy',
      hint: 'Օգտագործեք ռոմբ պայմանի համար, ստուգեք թիվը 2-ի բաժանելիությունը'
    },
    {
      id: 'ex-3',
      title: 'Կեղծ կոդի գրում',
      description: 'Գրեք կեղծ կոդ (pseudo-code), որը տպում է 1-ից 10 բոլոր թվերը։ Օգտագործեք ցիկլի կառուցվածք։',
      type: 'code',
      difficulty: 'easy',
      hint: 'Օգտագործեք FOR ցիկլ՝ i = 1-ից մինչև 10, և տպեք i-ի արժեքը'
    },
    {
      id: 'ex-4',
      title: 'Ալգորիթմի հատկությունների ճանաչում',
      description: 'Տրված է հետևյալ հրահանգաշարը․\n1. Վերցրու թիվ\n2. Եթե թիվը դրական է, անցիր 3 քայլին\n3. Բազմապատկիր 2-ի\n4. Անցիր 2 քայլին\n\nԲացատրեք, թե ինչու սա ալգորիթմ չէ և ո՞ր հատկությունը խախտվում է։',
      type: 'analysis',
      difficulty: 'medium',
      hint: 'Ուշադրություն դարձրեք 4-րդ քայլին - արդյոք ալգորիթմը կավարտվի՞'
    },
    {
      id: 'ex-5',
      title: 'Իրական կյանքի ալգորիթմ',
      description: 'Նկարագրեք թեյ պատրաստելու ալգորիթմը բառային ձևով։ Ներառեք բոլոր անհրաժեշտ քայլերը՝ սկսած ջրի տաքացումից մինչև թեյի սպասարկումը։',
      type: 'text',
      difficulty: 'easy',
      hint: 'Մտածեք քայլ առ քայլ՝ ջուր, թեյավազ, գավաթ, շաքար և այլն'
    },
    {
      id: 'ex-6',
      title: 'Բլոկ-սխեմայի ընթերցում',
      description: 'Տրված է բլոկ-սխեմա, որը ընդունում է թիվ, բազմապատկում է 3-ի, եթե դրական է, կամ հանում է 5, եթե բացասական է։ Բացատրեք, թե ինչ արդյունք կստացվի a=4 և b=-2 մուտքերի համար։',
      type: 'analysis',
      difficulty: 'medium',
      hint: 'Հետևեք ալգորիթմի յուրաքանչյուր քայլին և գրանցեք փոփոխականների արժեքները'
    },
    {
      id: 'ex-7',
      title: 'Մաքսիմում գտնելու ալգորիթմ',
      description: 'Գրեք ալգորիթմ (կամ բառային, կամ կեղծ կոդով), որը գտնում է 3 թվերից մեծագույնը։ Օգտագործեք պայմանական օպերատորներ։',
      type: 'code',
      difficulty: 'medium',
      hint: 'Համեմատեք առաջին երկու թվերը, ապա արդյունքը համեմատեք երրորդի հետ'
    },
    {
      id: 'ex-8',
      title: 'Ալգորիթմի օպտիմիզացիա',
      description: 'Տրված է ալգորիթմ, որը գտնում է զանգվածի մեջ տարրի գոյությունը՝ ստուգելով բոլոր տարրերը մինչև վերջը, նույնիսկ եթե տարրը արդեն գտնված է։ Բարելավեք ալգորիթմը՝ դարձնելով ավելի արդյունավետ։',
      type: 'optimization',
      difficulty: 'hard',
      hint: 'Ավելացրեք պայման՝ ալգորիթմը կանգնեցնելու, երբ տարրը գտնվի'
    }
  ]
};

const quizQuestions = {
  questions: [
    {
      id: 'q-1',
      question: 'Ի՞նչ է ալգորիթմը։',
      options: [
        'Խնդրի լուծման հստակ և վերջավոր քայլերի հաջորդականություն',
        'Ծրագրավորման լեզու',
        'Համակարգչային ծրագիր',
        'Մաթեմատիկական բանաձև'
      ],
      correct: 0,
      explanation: 'Ալգորիթմը խնդրի լուծման հստակ, որոշակի և վերջավոր քայլերի հաջորդականություն է։',
      difficulty: 'easy'
    },
    {
      id: 'q-2',
      question: 'Քանի՞ հիմնական ներկայացման եղանակ ունի ալգորիթմը։',
      options: [
        '1 - միայն կոդ',
        '2 - կոդ և բլոկ-սխեմա',
        '3 - բառային, բլոկ-սխեմա, կեղծ կոդ',
        '4 - բառային, բլոկ-սխեմա, կեղծ կոդ, ծրագրավորման լեզու'
      ],
      correct: 2,
      explanation: 'Ալգորիթմը կարող է ներկայացվել 3 հիմնական եղանակով՝ բառային նկարագրություն, բլոկ-սխեմա և կեղծ կոդ (pseudo-code)։',
      difficulty: 'easy'
    },
    {
      id: 'q-3',
      question: 'Ո՞ր հատկությունն է ապահովում ալգորիթմի ավարտը։',
      options: [
        'Որոշակիություն',
        'Վերջավորություն',
        'Արդյունավետություն',
        'Դիսկրետություն'
      ],
      correct: 1,
      explanation: 'Վերջավորության հատկությունը ապահովում է, որ ալգորիթմը կավարտվի վերջավոր քանակի քայլերից հետո։',
      difficulty: 'easy'
    },
    {
      id: 'q-4',
      question: 'Ի՞նչ է բլոկ-սխեման։',
      options: [
        'Ալգորիթմի տեքստային նկարագրություն',
        'Ալգորիթմի գրաֆիկական ներկայացում հատուկ ձևաչափերով',
        'Ծրագրավորման լեզու',
        'Մաթեմատիկական մոդել'
      ],
      correct: 1,
      explanation: 'Բլոկ-սխեման ալգորիթմի գրաֆիկական (վիզուալ) ներկայացումն է՝ օգտագործելով ստանդարտացված ձևաչափեր և նշաններ։',
      difficulty: 'easy'
    },
    {
      id: 'q-5',
      question: 'Ո՞ր հատկությունը թույլ է տալիս ալգորիթմը կիրառել նույն տիպի տարբեր խնդիրներին։',
      options: [
        'Վերջավորություն',
        'Համընդհանուրություն',
        'Որոշակիություն',
        'Արդյունավետություն'
      ],
      correct: 1,
      explanation: 'Համընդհանուրության հատկությունը թույլ է տալիս ալգորիթմը կիրառել մուտքային տվյալների մի շարքի համար, այլ ոչ թե միայն մեկ կոնկրետ դեպքի։',
      difficulty: 'medium'
    },
    {
      id: 'q-6',
      question: 'Ի՞նչ տարբերություն կա կեղծ կոդի և ծրագրավորման լեզվի միջև։',
      options: [
        'Տարբերություն չկա',
        'Կեղծ կոդը չի կարող կատարվել համակարգչում',
        'Կեղծ կոդն ավելի բարդ է',
        'Ծրագրավորման լեզուն չունի սինտաքս'
      ],
      correct: 1,
      explanation: 'Կեղծ կոդը (pseudo-code) ալգորիթմի ձևական նկարագրություն է, որը նման է ծրագրավորման լեզվին, բայց չի կարող ուղղակիորեն կատարվել համակարգչում։',
      difficulty: 'medium'
    },
    {
      id: 'q-7',
      question: 'Ո՞ր ներկայացման ձևն է ամենավիզուալը և հասկանալին։',
      options: [
        'Բառային նկարագրություն',
        'Կեղծ կոդ',
        'Բլոկ-սխեմա',
        'Ծրագրավորման լեզու'
      ],
      correct: 2,
      explanation: 'Բլոկ-սխեման ամենավիզուալ ձևն է, քանի որ օգտագործում է գրաֆիկական տարրեր և հեշտ է ընկալելու ալգորիթմի տրամաբանությունը։',
      difficulty: 'medium'
    },
    {
      id: 'q-8',
      question: 'Որո՞նք են դիսկրետության հատկության դրսևորումները։',
      options: [
        'Ալգորիթմը բաղկացած է առանձին, հստակ քայլերից',
        'Ալգորիթմը պետք է ավարտվի',
        'Ալգորիթմը պետք է լինի հասկանալի',
        'Ալգորիթմը պետք է լինի արագ'
      ],
      correct: 0,
      explanation: 'Դիսկրետությունը նշանակում է, որ ալգորիթմը բաժանված է առանձին, հստակ սահմանված քայլերի, որոնցից յուրաքանչյուրը պետք է կատարվի մինչև հաջորդին անցնելը։',
      difficulty: 'medium'
    },
    {
      id: 'q-9',
      question: 'Բլոկ-սխեմայում ո՞ր ձևը օգտագործվում է պայմանի (ճյուղավորման) համար։',
      options: [
        'Ուղղանկյուն',
        'Օվալ',
        'Ռոմբ',
        'Զուգահեռագիծ'
      ],
      correct: 2,
      explanation: 'Ռոմբը օգտագործվում է պայմանական (ճյուղավորման) գործողությունների համար, որտեղ ալգորիթմի հետագա ընթացքը կախված է պայմանի արդյունքից։',
      difficulty: 'medium'
    },
    {
      id: 'q-10',
      question: 'Տրված է հրահանգաշար՝ «Կրկնիր քայլը, մինչև ստանաս 100»։ Սա ալգորի՞թմ է։',
      options: [
        'Այո, քանի որ ունի հստակ հրահանգ',
        'Ոչ, քանի որ չի նշված, թե ինչպես ստանալ 100',
        'Այո, քանի որ ունի ավարտի պայման',
        'Ոչ, քանի որ չունի սկիզբ'
      ],
      correct: 1,
      explanation: 'Սա ալգորիթմ չէ, քանի որ չի նշված՝ ինչ քայլ պետք է կրկնել, ինչպես ստանալ 100։ Խախտվում է որոշակիության հատկությունը։',
      difficulty: 'hard'
    },
    {
      id: 'q-11',
      question: 'Ինչպե՞ս կարող ենք ապահովել ալգորիթմի որոշակիությունը։',
      options: [
        'Ավելացնելով ավելի շատ քայլեր',
        'Յուրաքանչյուր քայլ սահմանելով հստակ և անորոշության տեղ չթողնելով',
        'Օգտագործելով ավելի պարզ լեզու',
        'Կրճատելով քայլերի քանակը'
      ],
      correct: 1,
      explanation: 'Որոշակիությունը ապահովելու համար յուրաքանչյուր քայլ պետք է լինի հստակ և միանշանակ սահմանված, որպեսզի կատարողը ճիշտ հասկանա, թե ինչ անել։',
      difficulty: 'hard'
    },
    {
      id: 'q-12',
      question: 'Ի՞նչ դեպքերում կարող է ալգորիթմը չունենալ վերջավորություն։',
      options: [
        'Երբ ալգորիթմը շատ երկար է',
        'Երբ ալգորիթմում կա անվերջ ցիկլ կամ ռեկուրսիա առանց ավարտի պայմանի',
        'Երբ ալգորիթմը բարդ է',
        'Երբ օգտագործվում է բլոկ-սխեմա'
      ],
      correct: 1,
      explanation: 'Ալգորիթմը կարող է չավարտվել, եթե պարունակում է անվերջ ցիկլ կամ ռեկուրսիվ կանչ՝ առանց ճիշտ ավարտի պայմանի։ Սա խախտում է վերջավորության հատկությունը։',
      difficulty: 'hard'
    }
  ]
};

export async function updateTopicContent() {
  try {
    const { data, error } = await supabase
      .from('topics')
      .update({
        exercises: exercises,
        quiz_questions: quizQuestions,
        updated_at: new Date().toISOString()
      })
      .eq('id', topicId)
      .select();

    if (error) {
      console.error('Error updating topic:', error);
      return { success: false, error };
    }

    console.log('Topic updated successfully:', data);
    return { success: true, data };
  } catch (err) {
    console.error('Unexpected error:', err);
    return { success: false, error: err };
  }
}
